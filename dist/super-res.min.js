function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("q"),require("superagent"),require("route-parser"),require("cache-manager")):"function"==typeof define&&define.amd?define(["q","superagent","route-parser","cache-manager"],t):e.superRes=t(e.Q,e.superagent,e.Route,e.cacheManager)}(this,function(e,t,r,n){"use strict";function a(e,t){return e.reduce(function(e,r){return r(e,t.header)},t.body)}function i(e,t,r){return e.reduce(function(e,r){return r(e,t.header)},r)}function o(e,t){var r={},n=new f(e,t,h({},s));return r.get=n.makeRequest.bind(n),r.query=r.get,n=new f(e,t,h({},s,{method:"POST"})),r.save=n.makeRequest.bind(n),n=new f(e,t,h({},s,{method:"PUT"})),r.put=n.makeRequest.bind(n),n=new f(e,t,h({},s,{method:"DELETE"})),r.remove=n.makeRequest.bind(n),r["delete"]=r.remove,r}var s=s={method:"GET",responseType:"json",transformRequest:[],transformResponse:[],withCredentials:!1,cache:null},c=c||require("object.assign"),u={store:"memory",max:100,ttl:1200},f=function(){function o(e,t,a){var i=this;_classCallCheck(this,o),this.config=c({url:e},s,a),("POST"===this.config.method.toUpperCase()||"PUT"===this.config.method.toUpperCase()||"PATCH"===this.config.method.toUpperCase())&&(this.canHaveData=!0),this.route=new r(this.config.url),this.defaultParams={},this.derivedParams={},Object.getOwnPropertyNames(t||{}).forEach(function(e){var r=t[e];"function"==typeof r?i.derivedParams[e]=r:"string"==typeof r&&r.startsWith("@")?i.derivedParams[e]=r.slice(1):i.defaultParams[e]=t[e]}),this.config.cache===!0&&(this.config.cache=n.caching(u))}return _createClass(o,[{key:"getCacheKey",value:function(e,t){return this.route.reverse(e)+JSON.stringify(t||{})}},{key:"buildRequest",value:function(e,r){var n=this.config.method.toLowerCase(),a=t["delete"===n?"del":n](this.route.reverse(e));if(a=a.accept(this.config.responseType),this.config.headers&&(a=a.set(this.config.headers)),this.config.timeout?a.timeout(this.config.timeout):a.clearTimeout(),this.config.withCredentials&&(a=a.withCredentials()),r){var o=i(this.config.transformRequest,a,r);a="get"===n?a.query(o):a.send(o)}return a}},{key:"makeRequest",value:function(t,r){var n=this,i=e.defer();1===arguments.length&&this.canHaveData&&(r=t,t=void 0);var o={};Object.getOwnPropertyNames(this.derivedParams).forEach(function(e){var t=n.derivedParams[e];o[e]="function"==typeof t?t():r[t]});var s=c({},this.defaultParams,o,t),u=function(){n.buildRequest(s,r).end(function(e,t){if(e)i.reject(e);else{var o=a(n.config.transformResponse,t);n.config.cache&&n.config.cache.set(n.getCacheKey(s,r),o),i.resolve(o)}})};if(this.config.cache&&"GET"===this.config.method.toUpperCase()){var f=this.getCacheKey(s,r);this.config.cache.get(f,function(e,t){e?i.reject(e):t?i.resolve(t):u()})}else u();return i.promise}}]),o}(),h=h||require("object.assign"),d={};d.resource=function(e,t,r){var n=o(e,t);return r&&Object.getOwnPropertyNames(r).forEach(function(a){var i=new f(e,t,r[a]);n[a]=function(){i.makeRequest.apply(i,arguments)}}),n},d.promiseWrapper=function(e){return function(t){var r=h({},t);return Object.getOwnPropertyNames(t).forEach(function(t){var n=r[t];r[t]=function(){for(var t=arguments.length,a=Array(t),i=0;t>i;i++)a[i]=arguments[i];var o=n.apply(r,a);return e(o)}}),r}};var m=d;return m});
//# sourceMappingURL=super-res.min.js.map