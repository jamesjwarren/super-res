function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("q"),require("superagent"),require("route-parser"),require("cache-manager")):"function"==typeof define&&define.amd?define(["q","superagent","route-parser","cache-manager"],t):e.superRes=t(e.Q,e.superagent,e.Route,e.cacheManager)}(this,function(e,t,r,n){"use strict";function i(e,t){return e.reduceRight(function(e,r){return r(e,t.header)},t.body)}function o(e,t,r){return e.reduceRight(function(e,r){return r(e,t.header)},r)}function a(e,t){var r={},n=new c(e,t,f({},s));return r.get=n.makeRequest.bind(n),r.query=r.get,n=new c(e,t,f({},s,{method:"POST"})),r.save=n.makeRequest.bind(n),n=new c(e,t,f({},s,{method:"PUT"})),r.put=n.makeRequest.bind(n),n=new c(e,t,f({},s,{method:"DELETE"})),r.remove=n.makeRequest.bind(n),r["delete"]=r.remove,r}var s=s={method:"GET",responseType:"json",transformRequest:[],transformResponse:[],withCredentials:!1,cache:null},u=u||require("object.assign"),c=function(){function a(e,t,i){_classCallCheck(this,a),this.config=u({url:e},s,i),this.route=new r(this.config.url),this.defaultParams=t,this.config.cache===!0&&(this.config.cache=n.caching({store:"memory",max:100,ttl:1200}))}return _createClass(a,[{key:"getCacheKey",value:function(e,t){return this.route.reverse(e)+JSON.stringify(t)}},{key:"buildRequest",value:function(e,r){var n=this.config.method.toLowerCase(),i=t["delete"===n?"del":n](this.route.reverse(e));if(i=i.accept(this.config.responseType),this.config.headers&&(i=i.set(this.config.headers)),this.config.timeout?i.timeout(this.config.timeout):i.clearTimeout(),this.config.withCredentials&&(i=i.withCredentials()),r){var a=o(this.config.transformRequest,i,r);i="get"===n?i.query(a):i.send(a)}return i}},{key:"makeRequest",value:function(t,r){var n=this,o=e.defer(),a=u({},this.defaultParams,t),s=function(){n.buildRequest(a,r).end(function(e,t){if(e)o.reject(e);else{var s=i(n.config.transformResponse,t);n.config.cache&&n.config.cache.set(n.getCacheKey(a,r),s),o.resolve(s)}})};if(this.config.cache&&"get"===this.config.method.toLowerCase()){var c=this.getCacheKey(a,r);this.config.cache.get(c,function(e,t){e?o.reject(e):t?o.resolve(t):s()})}else s();return o.promise}}]),a}(),f=f||require("object.assign"),h={};h.resource=function(e,t,r){var n=a(e,t);return r&&Object.getOwnPropertyNames(r).forEach(function(i){n[i]=new c(e,t,r[i]).makeRequest}),n},h.promiseWrapper=function(e){return function(t){var r=f({},t);return Object.getOwnPropertyNames(t).forEach(function(t){var n=r[t];r[t]=function(){for(var t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];var a=n.apply(r,i);return e(a)}}),r}};var g=h;return g});
//# sourceMappingURL=super-res.min.js.map